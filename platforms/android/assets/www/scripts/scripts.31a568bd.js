"use strict";var app=angular.module("application",["config","ionic","ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","angular-flash.service","angular-flash.flash-alert-directive","LocalStorageModule"]);app.config(["$httpProvider","$ionicConfigProvider",function(a,b){a.interceptors.push("TokenInterceptor"),a.interceptors.push("ValidationInterceptor"),a.interceptors.push("ErrorInterceptor"),a.interceptors.push("MessageInterceptor"),a.interceptors.push("LoadingInterceptor"),b.tabs.position("bottom")}]),app.config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("app",{url:"/","abstract":!0,templateUrl:"./views/layouts/default.html"}).state("app.home",{url:"",views:{appContent:{templateUrl:"./views/ponedjeljak.html"}}}).state("app.ponedjeljak",{url:"ponedjeljak",views:{appContent:{templateUrl:"./views/ponedjeljak.html"}}}).state("app.utorak",{url:"utorak",data:{cssClassnames:"utorak"},views:{appContent:{templateUrl:"./views/utorak.html"}}}).state("app.srijeda",{url:"srijeda",data:{cssClassnames:"srijeda"},views:{appContent:{templateUrl:"./views/srijeda.html"}}}).state("app.cetvrtak",{url:"cetvrtak",data:{cssClassnames:"cetvrtak"},views:{appContent:{templateUrl:"./views/cetvrtak.html"}}}).state("app.petak",{url:"petak",data:{cssClassnames:"petak"},views:{appContent:{templateUrl:"./views/petak.html"}}}),b.otherwise("/")}]),angular.module("config",[]).constant("ENV","dev").constant("CONFIG",{API_URL:"http://localhost/phalconinit/"}),app.factory("UserService",["CONFIG","$http","$log","$window","$rootScope",function(a,b,c,d,e){var f=a.API_URL+"authentication",g={};return g.token=function(a){return(a="undefined"!=typeof a?a:!1)?(d.localStorage.token=a,a):null!==a?d.localStorage.token:void delete d.localStorage.token},g.login=function(a){var c=b.post(f+"/login",a);return c.success(function(a){g.token(a.data.token)}),c},g.logout=function(){g.token(null)},g.register=function(a){return b.post(f+"/register",a)},g.view=function(){return b.get(f+"/me")},g}]),app.controller("MainController",["UserService","$rootScope","$scope","$log","$injector","$state","$q","flash","$ionicLoading","$timeout","$window","$ionicViewService","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.$on("$viewHistory.historyChange",function(a,b){c.isBackButtonShown=!!b.showBack})}]),app.controller("ponedjeljakCtrl",["$scope","localStorageService",function(a,b){a.initPon=function(){a.newTodo={},a.ponedjeljak=[],b.get("ponedjeljakList")?a.ponedjeljak=b.get("ponedjeljakList"):a.ponedjeljak=[{title:"Kafa",isDone:!1,number:"1"},{title:"Narandža",isDone:!1,number:"2"},{title:"Dvopek",isDone:!1,number:"3"},{title:"Narandža",isDone:!1,number:"4"},{title:"Jaje",isDone:!1,number:"5"},{title:"Pavlaka",isDone:!1,number:"6"},{title:"Paradajz",isDone:!1,number:"7"},{title:"Paradajz",isDone:!1,number:"8"},{title:"Jaje",isDone:!1,number:"9"},{title:"Jaje",isDone:!1,number:"10"},{title:"Salata 1/2",isDone:!1,number:"11"},{title:"Dvopek",isDone:!1,number:"12"},{title:"Dvopek",isDone:!1,number:"13"}]},a.markAllDone=function(){a.ponedjeljak.forEach(function(a){a.isDone=!0})},a.uncheckAllDone=function(){a.ponedjeljak.forEach(function(a){a.isDone=!1})},a.doneCount=function(){var b=0;return a.ponedjeljak.forEach(function(a){a.isDone===!0&&(b+=1)}),b},a.clearCompleted=function(){for(var b=[],c=0;c<a.ponedjeljak.length;c++)a.ponedjeljak[c].isDone&&b.push(c);for(var c=0;c<b.length;c++)a.ponedjeljak.splice(b[c]-c,1)},a.almostOneNotDone=function(){var b=a.doneCount();return b<a.ponedjeljak.length?!0:!1},a.$watch("ponedjeljak",function(a,c){null!==a&&angular.isDefined(a)&&a!==c&&b.add("ponedjeljakList",angular.toJson(a))},!0)}]),app.controller("utorakCtrl",["$scope","localStorageService",function(a,b){a.initUto=function(){a.newTodo={},a.utorak=[],b.get("utorakList")?a.utorak=b.get("utorakList"):a.utorak=[{title:"Kafa",isDone:!1,number:"1"},{title:"Narandža",isDone:!1,number:"2"},{title:"Dvopek",isDone:!1,number:"3"},{title:"Narandža",isDone:!1,number:"4"},{title:"Jaje",isDone:!1,number:"5"},{title:"Pavlaka",isDone:!1,number:"6"},{title:"Dvopek",isDone:!1,number:"7"},{title:"Dvopek",isDone:!1,number:"8"},{title:"Mljeveno meso (125gr)",isDone:!1,number:"9"},{title:"Paradajz",isDone:!1,number:"10"},{title:"Narandža",isDone:!1,number:"11"},{title:"Dvopek",isDone:!1,number:"12"},{title:"Čaj",isDone:!1,number:"13"}]},a.markAllDone=function(){a.utorak.forEach(function(a){a.isDone=!0})},a.uncheckAllDone=function(){a.utorak.forEach(function(a){a.isDone=!1})},a.doneCount=function(){var b=0;return a.utorak.forEach(function(a){a.isDone===!0&&(b+=1)}),b},a.clearCompleted=function(){for(var b=[],c=0;c<a.utorak.length;c++)a.utorak[c].isDone&&b.push(c);for(var c=0;c<b.length;c++)a.utorak.splice(b[c]-c,1)},a.almostOneNotDone=function(){var b=a.doneCount();return b<a.utorak.length?!0:!1},a.$watch("utorak",function(a,c){null!==a&&angular.isDefined(a)&&a!==c&&b.add("utorakList",angular.toJson(a))},!0)}]),app.controller("srijedaCtrl",["$scope","localStorageService",function(a,b){a.initSri=function(){a.newTodo={},a.srijeda=[],b.get("srijedaList")?a.srijeda=b.get("srijedaList"):a.srijeda=[{title:"Kafa",isDone:!1,number:"1"},{title:"Narandža",isDone:!1,number:"2"},{title:"Dvopek",isDone:!1,number:"3"},{title:"Narandža",isDone:!1,number:"4"},{title:"Jaje",isDone:!1,number:"5"},{title:"Pavlaka",isDone:!1,number:"6"},{title:"Salata 1/1",isDone:!1,number:"7"},{title:"Mljeveno meso (125gr)",isDone:!1,number:"8"},{title:"Narandza",isDone:!1,number:"9"},{title:"Dvopek",isDone:!1,number:"10"},{title:"Čaj",isDone:!1,number:"11"}]},a.markAllDone=function(){a.srijeda.forEach(function(a){a.isDone=!0})},a.uncheckAllDone=function(){a.srijeda.forEach(function(a){a.isDone=!1})},a.doneCount=function(){var b=0;return a.srijeda.forEach(function(a){a.isDone===!0&&(b+=1)}),b},a.clearCompleted=function(){for(var b=[],c=0;c<a.srijeda.length;c++)a.srijeda[c].isDone&&b.push(c);for(var c=0;c<b.length;c++)a.srijeda.splice(b[c]-c,1)},a.almostOneNotDone=function(){var b=a.doneCount();return b<a.srijeda.length?!0:!1},a.$watch("srijeda",function(a,c){null!==a&&angular.isDefined(a)&&a!==c&&b.add("srijedaList",angular.toJson(a))},!0)}]),app.controller("cetvrtakCtrl",["$scope","localStorageService",function(a,b){a.initCet=function(){a.newTodo={},a.cetvrtak=[],b.get("cetvrtakList")?a.cetvrtak=b.get("cetvrtakList"):a.cetvrtak=[{title:"Kafa",isDone:!1,number:"1"},{title:"Narandža",isDone:!1,number:"2"},{title:"Dvopek",isDone:!1,number:"3"},{title:"Sir (125gr)",isDone:!1,number:"4"},{title:"Paradajz",isDone:!1,number:"5"},{title:"Dvopek",isDone:!1,number:"6"},{title:"Mljeveno meso (125gr)",isDone:!1,number:"7"},{title:"Paradajz",isDone:!1,number:"8"},{title:"Paradajz",isDone:!1,number:"9"},{title:"Narandža",isDone:!1,number:"10"},{title:"Dvopek",isDone:!1,number:"11"}]},a.markAllDone=function(){a.cetvrtak.forEach(function(a){a.isDone=!0})},a.uncheckAllDone=function(){a.cetvrtak.forEach(function(a){a.isDone=!1})},a.doneCount=function(){var b=0;return a.cetvrtak.forEach(function(a){a.isDone===!0&&(b+=1)}),b},a.clearCompleted=function(){for(var b=[],c=0;c<a.cetvrtak.length;c++)a.cetvrtak[c].isDone&&b.push(c);for(var c=0;c<b.length;c++)a.cetvrtak.splice(b[c]-c,1)},a.almostOneNotDone=function(){var b=a.doneCount();return b<a.cetvrtak.length?!0:!1},a.$watch("cetvrtak",function(a,c){null!==a&&angular.isDefined(a)&&a!==c&&b.add("cetvrtakList",angular.toJson(a))},!0)}]),app.controller("petakCtrl",["$scope","localStorageService",function(a,b){a.initPet=function(){a.newTodo={},a.petak=[],b.get("petakList")?a.petak=b.get("petakList"):a.petak=[{title:"Kafa",isDone:!1,number:"1"},{title:"Narandža",isDone:!1,number:"2"},{title:"Dvopek",isDone:!1,number:"3"},{title:"Kuhano meso (200gr)",isDone:!1,number:"4"},{title:"Paradajz",isDone:!1,number:"5"},{title:"Dvopek",isDone:!1,number:"6"},{title:"Povrće (500gr)",isDone:!1,number:"7"},{title:"Jaje",isDone:!1,number:"8"},{title:"Paradajz",isDone:!1,number:"9"}]},a.markAllDone=function(){a.petak.forEach(function(a){a.isDone=!0})},a.uncheckAllDone=function(){a.petak.forEach(function(a){a.isDone=!1})},a.doneCount=function(){var b=0;return a.petak.forEach(function(a){a.isDone===!0&&(b+=1)}),b},a.clearCompleted=function(){for(var b=[],c=0;c<a.petak.length;c++)a.petak[c].isDone&&b.push(c);for(var c=0;c<b.length;c++)a.petak.splice(b[c]-c,1)},a.almostOneNotDone=function(){var b=a.doneCount();return b<a.petak.length?!0:!1},a.$watch("petak",function(a,c){null!==a&&angular.isDefined(a)&&a!==c&&b.add("petakList",angular.toJson(a))},!0)}]),function(){function a(a){return{restrict:"A",scope:{},link:function(b,c,d,e){a.$on("$stateChangeSuccess",function(a,b,d,e,f){var g=angular.isDefined(e.data)&&angular.isDefined(e.data.cssClassnames)?e.data.cssClassnames:null,h=angular.isDefined(b.data)&&angular.isDefined(b.data.cssClassnames)?b.data.cssClassnames:null;g!=h&&(g&&c.removeClass(g),h&&c.addClass(h))})}}}a.$inject=["$rootScope"],app.directive("routeCssClassnames",a)}(),app.factory("ErrorInterceptor",["$log","$q","$window","$rootScope","$location","$injector",function(a,b,c,d,e,f){return{request:function(a){return a},response:function(a){return a||b.when(a)},responseError:function(a){var c=!1;if((400==a.status||500==a.status)&&"undefined"!=typeof a.data.message&&""!=a.data.message&&(c=a.data.message),c){var d=f.get("$ionicPopup");d.alert({title:"An Error Occured",template:c})}return b.reject(a)}}}]),app.factory("LoadingInterceptor",["$log","$q","$window","$rootScope","$location","$injector",function(a,b,c,d,e,f){return{request:function(a){var b=f.get("$ionicLoading");return b.show({template:'<i class="icon ion-loading-c"></i>',animation:"fade-in",showBackdrop:!0,showDelay:5}),a},response:function(a){var c=f.get("$ionicLoading");return c.hide(),a||b.when(a)},responseError:function(a){var c=f.get("$ionicLoading");return c.hide(),b.reject(a)}}}]),app.factory("MessageInterceptor",["$log","$q","$window","$rootScope","$location","$injector",function(a,b,c,d,e,f){return{request:function(a){return a},response:function(a){if(""!=a.data.message&&"undefined"!=typeof a.data.message){var c=f.get("flash");c.info=a.data.message}return a||b.when(a)},responseError:function(a){return b.reject(a)}}}]),app.factory("TokenInterceptor",["$log","$q","$window","$rootScope","$location","$injector",function(a,b,c,d,e,f){return{request:function(a){var b=f.get("UserService");return a.headers=a.headers||{},b.token()&&(a.headers["X-Auth-Token"]=b.token()),a},response:function(a){return a||b.when(a)},responseError:function(a){return 403==a.status&&d.logout(),b.reject(a)}}}]),app.factory("ValidationInterceptor",["$log","$q","$window","$rootScope","$location","$injector",function(a,b,c,d,e,f){return{request:function(a){return a},response:function(a){return a||b.when(a)},responseError:function(a){if(406==a.status){var c=!1;if(null!==a.data.data?(c="",angular.forEach(a.data.data,function(a,b){c+=a+"\n"})):c=a.data.message,c){var d=f.get("$ionicPopup");d.alert({title:"Validation Failed",template:c})}}return b.reject(a)}}}]);