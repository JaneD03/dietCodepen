"use strict";var app=angular.module("application",["config","ionic","ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","angular-flash.service","angular-flash.flash-alert-directive","LocalStorageModule"]);app.config(["$httpProvider","$ionicConfigProvider",function(a,b){a.interceptors.push("TokenInterceptor"),a.interceptors.push("ValidationInterceptor"),a.interceptors.push("ErrorInterceptor"),a.interceptors.push("MessageInterceptor"),a.interceptors.push("LoadingInterceptor"),b.tabs.position("bottom")}]),app.config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("app",{url:"/","abstract":!0,templateUrl:"./views/layouts/default.html"}).state("app.home",{url:"",views:{appContent:{templateUrl:"./views/monday.html"}}}).state("app.monday",{url:"monday",views:{appContent:{templateUrl:"./views/monday.html"}}}).state("app.tuesday",{url:"tuesday",data:{cssClassnames:"tuesday"},views:{appContent:{templateUrl:"./views/tuesday.html"}}}).state("app.wednesday",{url:"wednesday",data:{cssClassnames:"wednesday"},views:{appContent:{templateUrl:"./views/wednesday.html"}}}).state("app.thursday",{url:"thursday",data:{cssClassnames:"thursday"},views:{appContent:{templateUrl:"./views/thursday.html"}}}).state("app.friday",{url:"friday",data:{cssClassnames:"friday"},views:{appContent:{templateUrl:"./views/friday.html"}}}),b.otherwise("/")}]),angular.module("config",[]).constant("ENV","dev").constant("CONFIG",{API_URL:"http://localhost/phalconinit/"}),app.factory("UserService",["CONFIG","$http","$log","$window","$rootScope",function(a,b,c,d,e){var f=a.API_URL+"authentication",g={};return g.token=function(a){return(a="undefined"!=typeof a?a:!1)?(d.localStorage.token=a,a):null!==a?d.localStorage.token:void delete d.localStorage.token},g.login=function(a){var c=b.post(f+"/login",a);return c.success(function(a){g.token(a.data.token)}),c},g.logout=function(){g.token(null)},g.register=function(a){return b.post(f+"/register",a)},g.view=function(){return b.get(f+"/me")},g}]),app.controller("MainController",["UserService","$rootScope","$scope","$log","$injector","$state","$q","flash","$ionicLoading","$timeout","$window","$ionicViewService","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.$on("$viewHistory.historyChange",function(a,b){c.isBackButtonShown=!!b.showBack})}]),app.controller("mondayCtrl",["$scope","localStorageService",function(a,b){a.initMonday=function(){a.monday=[],b.get("mondayList")?a.monday=b.get("mondayList"):a.monday=[{title:"Coffee",isDone:!1,number:"1"},{title:"Orange",isDone:!1,number:"2"},{title:"Melba toast",isDone:!1,number:"3"},{title:"Orange",isDone:!1,number:"4"},{title:"Boiled egg",isDone:!1,number:"5"},{title:"Yogurt",isDone:!1,number:"6"},{title:"Tomato",isDone:!1,number:"7"},{title:"Tomato",isDone:!1,number:"8"},{title:"Boiled egg",isDone:!1,number:"9"},{title:"Boiled egg",isDone:!1,number:"10"},{title:"1/2 Head Of Lettuce",isDone:!1,number:"11"},{title:"Melba toast",isDone:!1,number:"12"},{title:"Melba toast",isDone:!1,number:"13"}]},a.markAllChecked=function(){a.monday.forEach(function(a){a.isChecked=!0})},a.uncheckAllChecked=function(){a.monday.forEach(function(a){a.isChecked=!1})},a.checkedCount=function(){var b=0;return a.monday.forEach(function(a){a.isChecked===!0&&(b+=1)}),b},a.almostOneNotChecked=function(){var b=a.checkedCount();return b<a.monday.length?!0:!1},a.$watch("monday",function(a,c){null!==a&&angular.isDefined(a)&&a!==c&&b.add("mondayList",angular.toJson(a))},!0)}]),app.controller("tuesdayCtrl",["$scope","localStorageService",function(a,b){a.initTue=function(){a.tuesday=[],b.get("tuesdayList")?a.tuesday=b.get("tuesdayList"):a.tuesday=[{title:"Coffee",isDone:!1,number:"1"},{title:"Orange",isDone:!1,number:"2"},{title:"Melba toast",isDone:!1,number:"3"},{title:"Orange",isDone:!1,number:"4"},{title:"Boiled egg",isDone:!1,number:"5"},{title:"Yogurt",isDone:!1,number:"6"},{title:"Melba toast",isDone:!1,number:"7"},{title:"Melba toast",isDone:!1,number:"8"},{title:"Minced meat (125gr)",isDone:!1,number:"9"},{title:"Tomato",isDone:!1,number:"10"},{title:"Orange",isDone:!1,number:"11"},{title:"Melba toast",isDone:!1,number:"12"},{title:"Tea",isDone:!1,number:"13"}]},a.markAllChecked=function(){a.tuesday.forEach(function(a){a.isChecked=!0})},a.uncheckAllChecked=function(){a.tuesday.forEach(function(a){a.isChecked=!1})},a.checkedCount=function(){var b=0;return a.tuesday.forEach(function(a){a.isChecked===!0&&(b+=1)}),b},a.almostOneNotChecked=function(){var b=a.checkedCount();return b<a.tuesday.length?!0:!1},a.$watch("tuesday",function(a,c){null!==a&&angular.isDefined(a)&&a!==c&&b.add("tuesdayList",angular.toJson(a))},!0)}]),app.controller("wednesdayCtrl",["$scope","localStorageService",function(a,b){a.initWed=function(){a.wednesday=[],b.get("wednesdayList")?a.wednesday=b.get("wednesdayList"):a.wednesday=[{title:"Coffee",isDone:!1,number:"1"},{title:"Orange",isDone:!1,number:"2"},{title:"Melba toast",isDone:!1,number:"3"},{title:"Orange",isDone:!1,number:"4"},{title:"Boiled egg",isDone:!1,number:"5"},{title:"Yogurt",isDone:!1,number:"6"},{title:"Head Of Lettuce",isDone:!1,number:"7"},{title:"Minced meat (125gr)",isDone:!1,number:"8"},{title:"Orange",isDone:!1,number:"9"},{title:"Melba toast",isDone:!1,number:"10"},{title:"Tea",isDone:!1,number:"11"}]},a.markAllChecked=function(){a.wednesday.forEach(function(a){a.isChecked=!0})},a.uncheckAllChecked=function(){a.wednesday.forEach(function(a){a.isChecked=!1})},a.checkedCount=function(){var b=0;return a.wednesday.forEach(function(a){a.isChecked===!0&&(b+=1)}),b},a.almostOneNotChecked=function(){var b=a.checkedCount();return b<a.wednesday.length?!0:!1},a.$watch("wednesday",function(a,c){null!==a&&angular.isDefined(a)&&a!==c&&b.add("wednesdayList",angular.toJson(a))},!0)}]),app.controller("thursdayCtrl",["$scope","localStorageService",function(a,b){a.initThu=function(){a.thursday=[],b.get("thursdayList")?a.thursday=b.get("thursdayList"):a.thursday=[{title:"Coffee",isDone:!1,number:"1"},{title:"Orange",isDone:!1,number:"2"},{title:"Melba toast",isDone:!1,number:"3"},{title:"Sir (125gr)",isDone:!1,number:"4"},{title:"Tomato",isDone:!1,number:"5"},{title:"Melba toast",isDone:!1,number:"6"},{title:"Minced meat (125gr)",isDone:!1,number:"7"},{title:"Tomato",isDone:!1,number:"8"},{title:"Tomato",isDone:!1,number:"9"},{title:"Orange",isDone:!1,number:"10"},{title:"Melba toast",isDone:!1,number:"11"}]},a.markAllChecked=function(){a.thursday.forEach(function(a){a.isChecked=!0})},a.uncheckAllChecked=function(){a.thursday.forEach(function(a){a.isChecked=!1})},a.checkedCount=function(){var b=0;return a.thursday.forEach(function(a){a.isChecked===!0&&(b+=1)}),b},a.almostOneNotChecked=function(){var b=a.checkedCount();return b<a.thursday.length?!0:!1},a.$watch("thursday",function(a,c){null!==a&&angular.isDefined(a)&&a!==c&&b.add("thursdayList",angular.toJson(a))},!0)}]),app.controller("fridayCtrl",["$scope","localStorageService",function(a,b){a.initFri=function(){a.petak=[],b.get("fridayList")?a.friday=b.get("fridayList"):a.friday=[{title:"Coffee",isDone:!1,number:"1"},{title:"Orange",isDone:!1,number:"2"},{title:"Melba toast",isDone:!1,number:"3"},{title:"Cooked Meat (200gr)",isDone:!1,number:"4"},{title:"Tomato",isDone:!1,number:"5"},{title:"Melba toast",isDone:!1,number:"6"},{title:"Vegetables (500gr)",isDone:!1,number:"7"},{title:"Boiled egg",isDone:!1,number:"8"},{title:"Tomato",isDone:!1,number:"9"}]},a.markAllChecked=function(){a.friday.forEach(function(a){a.isChecked=!0})},a.uncheckAllChecked=function(){a.friday.forEach(function(a){a.isChecked=!1})},a.checkedCount=function(){var b=0;return a.friday.forEach(function(a){a.isChecked===!0&&(b+=1)}),b},a.almostOneNotChecked=function(){var b=a.checkedCount();return b<a.friday.length?!0:!1},a.$watch("friday",function(a,c){null!==a&&angular.isDefined(a)&&a!==c&&b.add("fridayList",angular.toJson(a))},!0)}]),app.directive("routeCssClassnames",["$rootScope",function(a){return{restrict:"A",scope:{},link:function(b,c,d,e){a.$on("$stateChangeSuccess",function(a,b,d,e,f){var g=angular.isDefined(e.data)&&angular.isDefined(e.data.cssClassnames)?e.data.cssClassnames:null,h=angular.isDefined(b.data)&&angular.isDefined(b.data.cssClassnames)?b.data.cssClassnames:null;g!=h&&(g&&c.removeClass(g),h&&c.addClass(h))})}}}]),app.factory("ErrorInterceptor",["$log","$q","$window","$rootScope","$location","$injector",function(a,b,c,d,e,f){return{request:function(a){return a},response:function(a){return a||b.when(a)},responseError:function(a){var c=!1;if((400==a.status||500==a.status)&&"undefined"!=typeof a.data.message&&""!=a.data.message&&(c=a.data.message),c){var d=f.get("$ionicPopup");d.alert({title:"An Error Occured",template:c})}return b.reject(a)}}}]),app.factory("LoadingInterceptor",["$log","$q","$window","$rootScope","$location","$injector",function(a,b,c,d,e,f){return{request:function(a){var b=f.get("$ionicLoading");return b.show({template:'<i class="icon ion-loading-c"></i>',animation:"fade-in",showBackdrop:!0,showDelay:5}),a},response:function(a){var c=f.get("$ionicLoading");return c.hide(),a||b.when(a)},responseError:function(a){var c=f.get("$ionicLoading");return c.hide(),b.reject(a)}}}]),app.factory("MessageInterceptor",["$log","$q","$window","$rootScope","$location","$injector",function(a,b,c,d,e,f){return{request:function(a){return a},response:function(a){if(""!=a.data.message&&"undefined"!=typeof a.data.message){var c=f.get("flash");c.info=a.data.message}return a||b.when(a)},responseError:function(a){return b.reject(a)}}}]),app.factory("TokenInterceptor",["$log","$q","$window","$rootScope","$location","$injector",function(a,b,c,d,e,f){return{request:function(a){var b=f.get("UserService");return a.headers=a.headers||{},b.token()&&(a.headers["X-Auth-Token"]=b.token()),a},response:function(a){return a||b.when(a)},responseError:function(a){return 403==a.status&&d.logout(),b.reject(a)}}}]),app.factory("ValidationInterceptor",["$log","$q","$window","$rootScope","$location","$injector",function(a,b,c,d,e,f){return{request:function(a){return a},response:function(a){return a||b.when(a)},responseError:function(a){if(406==a.status){var c=!1;if(null!==a.data.data?(c="",angular.forEach(a.data.data,function(a,b){c+=a+"\n"})):c=a.data.message,c){var d=f.get("$ionicPopup");d.alert({title:"Validation Failed",template:c})}}return b.reject(a)}}}]);